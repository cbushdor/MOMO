<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- saved from url=(0092)http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm -->
<HTML lang=fr xml:lang="fr" xmlns="http://www.w3.org/1999/xhtml"><HEAD><TITLE>lecture/écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare.fr</TITLE>
<META http-equiv=Content-Type content="text/html; charset=UTF-8">
<META content="index, follow" name=Robots>
<META 
content="lecture/écriture simultanées sur une socket [Perl] : Bonjour,&#13;&#10;&#13;&#10;J'aimerais faire du client-serveur intéractif en Perl.&#13;&#10;&#13;&#10;J'ai un serveur.pl qui fonctionne correctement, j'ai repris ce script : &#13;&#10;&#13;&#10;Et j" 
name=Description><LINK 
href="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/the_style1.css" 
type=text/css rel=stylesheet><LINK 
href="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/the_style.css" 
type=text/css rel=stylesheet><!--/* Openads Popup Tag v2.4.2 */-->
<SCRIPT 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/apu.htm" 
type=text/javascript></SCRIPT>

<STYLE type=text/css>.fastsearchMain {
	WIDTH: 330px
}
.fastsearchInput {
	BORDER-RIGHT: black 1px solid; BORDER-TOP: black 1px solid; BORDER-LEFT: black 1px solid; WIDTH: 70px; BORDER-BOTTOM: black 1px solid
}
.fastsearchSubmit {
	BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BACKGROUND-COLOR: #336699; BORDER-RIGHT-WIDTH: 0px
}
.header2 {
	BACKGROUND-IMAGE: url(/img/header2.gif); BACKGROUND-REPEAT: repeat-x
}
.menuExt {
	FONT-SIZE: 10px; FONT-FAMILY: Arial, Helvetica, sans-serif; TEXT-DECORATION: none
}
.menuExt:hover {
	TEXT-DECORATION: underline
}
FORM {
	DISPLAY: inline
}
.header {
	BACKGROUND-IMAGE: url(/img/header-bg.gif); BACKGROUND-REPEAT: repeat-x
}
.tdmenu {
	WIDTH: 1px; COLOR: #000000; HEIGHT: 1px
}
.hfrmenu {
	FONT-WEIGHT: bold; FONT-SIZE: 13px; COLOR: #ffffff; FONT-FAMILY: Arial, Helvetica, sans-serif; TEXT-DECORATION: none
}
.concours {
	FONT-WEIGHT: bold; FONT-SIZE: 16px; COLOR: #000000; FONT-FAMILY: Arial, Helvetica, sans-serif; TEXT-DECORATION: none
}
.concours:hover {
	FONT-WEIGHT: bold; FONT-SIZE: 16px; COLOR: #000000; FONT-FAMILY: Arial, Helvetica, sans-serif; TEXT-DECORATION: underline
}
.searchmenu {
	FONT-WEIGHT: bold; FONT-SIZE: 13px; COLOR: #ffffff; FONT-FAMILY: Arial, Helvetica, sans-serif; TEXT-DECORATION: none
}
.fastsearch {
	DISPLAY: none
}
.fastsearchHeader {
	FONT-WEIGHT: bold; FONT-SIZE: 13px; COLOR: #ffffff; FONT-FAMILY: Arial, Helvetica, sans-serif; TEXT-DECORATION: none
}
.fastsearchHeader:hover {
	FONT-WEIGHT: bold; FONT-SIZE: 13px; COLOR: #ffffff; FONT-FAMILY: Arial, Helvetica, sans-serif; TEXT-DECORATION: underline
}
.hfrmenu:hover {
	FONT-WEIGHT: bold; FONT-SIZE: 13px; COLOR: #ffffff; FONT-FAMILY: Arial, Helvetica, sans-serif; TEXT-DECORATION: underline
}
</STYLE>

<SCRIPT type=text/javascript>

</SCRIPT>

<SCRIPT language=javascript 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/onglet.js" 
type=text/javascript></SCRIPT>

<SCRIPT language=Javascript 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/forum2.js" 
type=text/javascript></SCRIPT>

<META content="MSHTML 6.00.2900.3243" name=GENERATOR></HEAD>
<BODY>
<TABLE cellSpacing=0 cellPadding=0 width="98%" align=center bgColor=#000000 
border=0>
  <TBODY>
  <TR>
    <TD class=tdmenu><IMG height=1 alt="" 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/pixel.gif" 
      width=1 border=0></TD>
    <TD class=tdmenu colSpan=3><IMG height=1 alt="" 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/pixel.gif" 
      width=1 border=0></TD>
    <TD class=tdmenu><IMG height=1 alt="" 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/pixel.gif" 
      width=1 border=0></TD></TR>
  <TR>
    <TD class=tdmenu rowSpan=4><IMG height=1 alt="" 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/pixel.gif" 
      width=1 border=0></TD>
    <TD style="VERTICAL-ALIGN: top" colSpan=3>
      <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
        <TBODY>
        <TR>
          <TD style="WIDTH: 80px"><A href="http://www.hardware.fr/"><IMG 
            height=71 alt="" 
            src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/header-hg.gif" 
            width=80 border=0></A></TD>
          <TD style="WIDTH: 314px" vAlign=center align=right><A 
            href="http://www.hardware.fr/"><IMG height=71 alt="" 
            src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/header1.gif" 
            width=314 border=0></A></TD>
          <TD class=header2 
          style="VERTICAL-ALIGN: middle; WIDTH: 100%; TEXT-ALIGN: right">&nbsp;</TD>
          <TD vAlign=center align=right width=344><IMG height=71 alt="" 
            src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/header3.gif" 
            width=344></TD></TR>
        <TR>
          <TD class=header 
          style="WIDTH: 80px; HEIGHT: 10px; BACKGROUND-COLOR: #336699">&nbsp;<A 
            class=hfrmenu href="http://forum.hardware.fr/">Forum</A> </TD>
          <TD style="BACKGROUND-COLOR: #336699" colSpan=3>
            <TABLE cellSpacing=0 cellPadding=2 width="100%" border=0>
              <TBODY>
              <TR>
                <TD>&nbsp; <A class=hfrmenu 
                  href="http://www.hardware.fr/">HardWare.fr</A>&nbsp;|&nbsp; <A 
                  class=hfrmenu 
                  href="http://www.hardware.fr/html/news/">News</A> 
                  &nbsp;|&nbsp; <A class=hfrmenu 
                  href="http://www.hardware.fr/html/articles/">Articles</A> 
                  &nbsp;|&nbsp; <A class=hfrmenu 
                  href="http://forum.hardware.fr/login.php?config=hardwarefr.inc">S'identifier</A>&nbsp;|&nbsp; 
                  <A class=hfrmenu 
                  href="http://forum.hardware.fr/inscription.php?config=hardwarefr.inc">S'inscrire</A> 
                  &nbsp;|&nbsp; <A class=hfrmenu 
                  href="http://forum.hardware.fr/documentation/index.html">Aide</A> 
                </TD>
                <TD align=right>
                  <FORM id=fastsearch action=/forum1.php method=post><LABEL 
                  for=fastsearchinputid><A class="cHeader fastsearchHeader" 
                  href="http://forum.hardware.fr/search.php?config=hardwarefr.inc&amp;cat=10&amp;subcat=392">Recherche 
                  :</A>&nbsp;<INPUT class=fastsearchInput id=fastsearchinputid 
                  alt="Search string" name=search></LABEL><INPUT type=hidden 
                  value=1 name=recherches><INPUT type=hidden value=1 
                  name=searchtype><INPUT type=hidden value=3 name=titre><INPUT 
                  type=hidden value=200 name=resSearch><INPUT type=hidden 
                  value=1 name=orderSearch><INPUT type=hidden 
                  value=hardwarefr.inc name=config><INPUT type=hidden value=10 
                  name=cat><INPUT type=hidden value=392 name=subcat>&nbsp;<INPUT 
                  class=fastsearchSubmit title="Lancer une recherche" type=image 
                  alt="Lancer une recherche" 
                  src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/ongletsearch.gif"></FORM></TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD class=tdmenu><IMG height=1 alt="" 
            src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/pixel.gif" 
            width=1 border=0></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<DIV style="WIDTH: 99%" align=right><A class="s2Ext menuExt" 
href="http://forum.hardware.fr/online.php?config=hardwarefr.inc" 
target=_blank>3137 connectés&nbsp;</A></DIV><BR>
<CENTER>
<SCRIPT language=JavaScript>
        now = new Date();
        ord = now.getTime();
</SCRIPT>

<SCRIPT language=JavaScript>
        document.write('<IFRAME SRC="http://i2as.idregie.com/i-i.php?s=2272&w=728&h=90&cb=' + ord + '"');
        document.write(' NORESIZE SCROLLING=NO HSPACE=0 VSPACE=0');
        document.write(' FRAMEBORDER=0 MARGINHEIGHT=0 MARGINWIDTH=0');
        document.write(' WIDTH=728 HEIGHT=90>');
        document.write('<A HREF="http://i2as.idregie.com/c.php?s=2272&w=728&h=90&cb=' + ord + '">');
        document.write('<IMG SRC="http://i2as.idregie.com/i.php?s=2272&w=728&h=90&cb=' + ord + '"');
        document.write(' WIDTH=728 HEIGHT=90 BORDER=0></A>');
        document.write('</IFRAME>');
</SCRIPT>
<NOSCRIPT><A href="http://i2as.idregie.com/c.php?s=2272&amp;w=728&amp;h=90"><IMG 
height=90 src="" width=728 border=0></A> </NOSCRIPT></NOLAYER><LAYER 
onload="moveToAbsolute(.pageX,.pageY);clip.height=90;clip.width=728;visibility='show';" 
width="728" height="90" visibility="hidden" 
SRC="http://i2as.idregie.com/i-i.php?s=2272&amp;w=728&amp;h=90&amp;cb=&amp;{ord}?"></LAYER></LAYER></CENTER>
<DIV class=container>
<DIV class=mesdiscussions id=mesdiscussions>
<DIV class=arbo>
<H1><IMG alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/open.png">&nbsp;&nbsp;<A 
class=Ext href="http://forum.hardware.fr/">FORUM HardWare.fr</A></H1><BR>
<H2><IMG alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/tline.png"><IMG 
alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/open.png">&nbsp;&nbsp;<A 
class=Ext 
href="http://forum.hardware.fr/hfr/Programmation/liste_sujet-1.htm">Programmation</A></H2><BR>
<H3><IMG alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/tline3.png"><IMG 
alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/open.png">&nbsp;&nbsp;<A 
class=Ext 
href="http://forum.hardware.fr/hfr/Programmation/Perl/liste_sujet-1.htm">Perl</A></H3><BR>
<H4><IMG alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/tline4.png"><IMG 
alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/open.png">&nbsp;&nbsp;<A 
class=Ext 
href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm">[Perl] 
lecture/écriture simultanées sur une socket</A></H4></DIV>
<DIV class="rightbutton fastsearch">
<TABLE class="main fastsearchMain" cellSpacing=0 cellPadding=2>
  <TBODY>
  <TR class="cBackHeader fondForumDescription">
    <TH>
      <FORM id=fastsearch action=/forum1.php method=post><LABEL 
      for=fastsearchinputid><A class="cHeader fastsearchHeader" 
      href="http://forum.hardware.fr/search.php?config=hfr.inc&amp;cat=10&amp;subcat=392">Recherche 
      :</A>&nbsp;<INPUT class=fastsearchInput id=fastsearchinputid 
      alt="Search string" 
      value="[Perl] lecture/écriture simultanées sur une socket" 
      name=search></LABEL><INPUT type=hidden value=1 name=recherches><INPUT 
      type=hidden value=1 name=searchtype><INPUT type=hidden value=3 
      name=titre><INPUT type=hidden value=200 name=resSearch><INPUT type=hidden 
      value=1 name=orderSearch><INPUT type=hidden value=hfr.inc 
      name=config><INPUT type=hidden value=10 name=cat><INPUT type=hidden 
      value=392 name=subcat>&nbsp;<INPUT class=fastsearchSubmit 
      title="Lancer une recherche" type=image alt="Lancer une recherche" 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/ongletsearch.gif"></FORM></TH></TR></TBODY></TABLE></DIV>
<DIV class=spacer></DIV><BR>
<DIV class=s1Ext></DIV><BR><A name=haut></A>
<TABLE class=main cellSpacing=0 cellPadding=4>
  <TBODY>
  <TR class="cBackHeader fondForum2Fonctions">
    <TH class=padding colSpan=2>
      <FORM action=/transsearch.php method=post><INPUT type=hidden value=107231 
      name=post><INPUT type=hidden value=10 name=cat><INPUT type=hidden 
      value=hfr.inc name=config><INPUT type=hidden value=1 name=p><INPUT 
      type=hidden value=0 name=sondage><INPUT type=hidden value=0 name=owntopic>
      <DIV class=left>&nbsp;Mot : <INPUT size=10 name=word>&nbsp;&nbsp;Pseudo : 
      <INPUT size=10 name=spseudo> <INPUT class=checkbox id=filter type=checkbox 
      value=1 name=filter><LABEL 
      title="N'afficher que les messages correspondant à la recherche" 
      for=filter>Filtrer</LABEL>&nbsp;<INPUT class=boutton onclick="document.getElementById('currentnum').value=''; return true;" type=submit value=Rechercher><INPUT 
      type=hidden value=0 name=dep><INPUT type=hidden value=1598554 
      name=firstnum></DIV></FORM>
      <DIV class=right style="MARGIN-TOP: 2px"><A class=cHeader 
      onclick="vider_liste('quoteshardwarefr-10-107231')" 
      href="javascript:void(0)"><IMG id=viderliste 
      title="Vider la liste des messages à citer" style="DISPLAY: none" 
      alt="Vider la liste des messages à citer" 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/viderliste.gif"></A> 
      &nbsp;</DIV></TH></TR>
  <TR class="cBackHeader fondForum2PagesHaut">
    <TH class=padding colSpan=2><A class=cHeader 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#bas">Bas 
      de page</A></TH></TR>
  <TR class="cBackHeader fondForum2Title">
    <TH class=messCase1 scope=col width=180>Auteur</TH>
    <TH class=padding scope=col>&nbsp;Sujet : 
      <H3>[Perl] lecture/écriture simultanées sur une 
socket</H3></TH></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #f7f7f7">
    <TD class=messCase1 vAlign=top width=180><A name=t1598554></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1598554"><IMG 
      title=n°1598554 alt=n°1598554 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon5.gif"></A></DIV>
      <DIV><B class=s2>sephiburp</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 11-08-2007&nbsp;à&nbsp;12:51:16&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-112043.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1598554&amp;ref=1&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1598554>
      <P>Bonjour, <BR>&nbsp;<BR>J'aimerais faire du client-serveur intéractif en 
      Perl. <BR>&nbsp;<BR>J'ai un serveur.pl qui fonctionne correctement, j'ai 
      repris ce script : <A class=cLink 
      href="http://perl.enstimac.fr/DocFr/perlipc.html#serveurs%20tcp%20avec%20io::socket" 
      target=_blank 
      rel=nofollow>http://perl.enstimac.fr/DocFr/perlipc.html#serveurs%20tcp%20avec%20io::socket</A> 
      <BR>&nbsp;<BR>Et j'ai un client.pl dont voici le code : <BR>&nbsp;<BR></P>
      <TABLE class=code>
        <TBODY>
        <TR class=none>
          <TD><B class=s1 
            style="FONT-FAMILY: Verdana, Helvetica, Arial, Sans-serif">Code 
            :</B><BR>
            <OL class=olcode id=code1>
              <LI>use IO::Socket;
              <LI>use warnings;
              <LI>use strict;
              <LI>
              <LI>my ($sock, $kidpid);
              <LI>
              <LI>$sock = IO::Socket::INET-&gt;<SPAN 
              style="COLOR: blue">new</SPAN>(Proto&nbsp; &nbsp; &nbsp;=&gt; 
              "tcp",
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PeerAddr&nbsp; =&gt; 
              "192.168.0.11",
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PeerPort&nbsp; =&gt; 
              9000)
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp; &nbsp; &nbsp; || die "Failed : $!";
              <LI>$sock-&gt;autoflush(1);
              <LI>
              <LI>$kidpid = fork();
              <LI>die "can't fork: $!" <SPAN style="COLOR: blue">if</SPAN> ! 
              <SPAN style="COLOR: blue">defined</SPAN>($kidpid);
              <LI>
              <LI><SPAN style="COLOR: blue">if</SPAN> ($kidpid) {
              <LI>&nbsp; &nbsp; # PERE : Ecoute des entrées clavier et envoi à 
              la socket
              <LI>&nbsp; &nbsp; <SPAN style="COLOR: blue">while</SPAN> 
              (&lt;STDIN&gt; ) { print $sock $_; }
              <LI>} <SPAN style="COLOR: blue">else</SPAN> {
              <LI>&nbsp; &nbsp; # FILS : Ecoute de la socket et affichage à 
              l'écran
              <LI>&nbsp; &nbsp; <SPAN style="COLOR: blue">while</SPAN> 
              (&lt;$sock&gt; ) { print STDOUT $_; }
              <LI>}
              <LI>
              <LI>close $sock;</LI></OL></TD></TR></TBODY></TABLE>
      <P><BR>Mon problème : <BR>La connexion réussie, et le client reçoit et 
      affiche les messages d'accueil du serveur. <BR>Mais après la première 
      ligne rentrée au clavier, çà se "bloque". Et le serveur ne recoit même pas 
      cette ligne. <BR>&nbsp;<BR>Après un déboggage "approfondi", j'en ai conclu 
      que le processus père n'arrive pas à écrire sur la socket tant que le fils 
      boucle sur cette même socket pour écouter. <BR>En effet, si je ne fais que 
      écrire ou que écouter, cà fonctionne très bien. <BR>&nbsp;<BR>J'ai essayer 
      plusieurs scripts client trouvés sur le net et j'en arrive toujours au 
      même problème. <BR>Même celui proposé ici réagit pareil : <A class=cLink 
      href="http://perl.enstimac.fr/DocFr/perlipc.html#client%20interactif%20avec%20io::socket" 
      target=_blank 
      rel=nofollow>http://perl.enstimac.fr/DocFr/perlipc.html#client%20interactif%20avec%20io::socket</A> 
      <BR>&nbsp;<BR>Je suis sous Windows 2000 et j'utilise Perl 5.8.8 <BR>Est-ce 
      à cause de Windows qui gère mal le fork() ou les sockets ? 
      <BR>&nbsp;<BR>Merci d'avance pour votre aide 
!!</P></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #dedfdf">
    <TD class=messCase1 vAlign=top width=180>
      <DIV class=right><IMG alt=mood 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></DIV>
      <DIV><B class=s2>Publicité</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 11-08-2007&nbsp;à&nbsp;12:51:16&nbsp;&nbsp;<IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"><IMG 
      title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV>
      <P>
      <SCRIPT type=text/javascript><!--
google_ad_client = "pub-5422505850558952";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
//2007-04-18: carre_contenu
google_ad_channel = "8039719411";
google_color_border = "E6E6E6";
google_color_bg = "E6E6E6";
google_color_link = "0000FF";
google_color_text = "000000";
google_color_url = "008000";
//-->
</SCRIPT>

      <SCRIPT 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/show_ads.js" 
      type=text/javascript>
</SCRIPT>
      </P></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #f7f7f7">
    <TD class=messCase1 vAlign=top width=180><A name=t1598667></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1598667"><IMG 
      title=n°1598667 alt=n°1598667 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>pmarion</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 12-08-2007&nbsp;à&nbsp;09:19:33&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-562552.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1598667&amp;ref=2&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1598667>
      <P>Bonjour, &nbsp;<BR>Je ne suis pas sûr que l'on puisse avoir le même 
      programme pour envoyer/recevoir, et donc utiliser un fork. 
      <BR>&nbsp;<BR>Pour ma part j'utilise deux programmes séparés : 
      &nbsp;<BR>Pour recevoir : &nbsp;<BR>#!/usr/bin/perl &nbsp;<BR>use strict; 
      <BR>use warnings; <BR>$|=1 ; <BR>&nbsp;<BR>use IO::Socket; <BR>use 
      warnings; <BR>use strict; <BR>my $sock = IO::Socket::INET-&gt;new(Proto 
      &nbsp; &nbsp; =&gt; "tcp", <BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PeerAddr 
      &nbsp;=&gt; "127.0.0.1", <BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LocalPort 
      &nbsp;=&gt; 9000, <BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Reuse=&gt;1, 
      &nbsp;<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Listen=&gt;1) <BR>&nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|| 
      die "Failed : $!"; <BR>my $sock_l = $sock-&gt;accept() ; <BR>while (1) { 
      my $lig = &lt;$sock_l&gt; ; &nbsp;<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; last if ( $lig eq "q\n" ) ; <BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; print $lig if ( $lig ) ; <BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; select(undef, undef, undef, 0.25) ; <BR>&nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; } <BR>close $sock; 
      <BR>_________________________________________________________________________________ 
      <BR>Et pour envoyer : <BR>&nbsp;#!/usr/bin/perl &nbsp;<BR>use IO::Socket; 
      <BR>use warnings; <BR>use strict; <BR>&nbsp; <BR>my $sock = 
      IO::Socket::INET-&gt;new(Proto &nbsp; &nbsp; =&gt; "tcp", <BR>&nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp;PeerAddr &nbsp;=&gt; "127.0.0.1", <BR>&nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp;PeerPort &nbsp;=&gt; 9000 ) &nbsp;<BR>&nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp;|| die "Failed : $!"; <BR>&nbsp;<BR>$sock-&gt;autoflush(1); 
      <BR>while ( 1 ) { &nbsp;<BR>&nbsp; my $lig = &lt;STDIN&gt; ; <BR>&nbsp; 
      print $sock $lig ; <BR>&nbsp; last if ( $lig eq "/q\n" ) ; &nbsp;<BR>} 
      <BR>close $sock; <BR>&nbsp;<BR>&nbsp;<BR>&nbsp;<BR>&nbsp;<BR></P>
      <DIV class=edited><A class=cLink 
      href="http://forum.hardware.fr/forum2.php?config=hfr.inc&amp;cat=10&amp;subcat=392&amp;post=107231&amp;page=1&amp;p=1&amp;sondage=&amp;owntopic=&amp;trash=&amp;trash_post=&amp;print=&amp;numreponse=1598667&amp;quote_only=1&amp;new=0&amp;nojs=0" 
      rel=nofollow>Message cité 1 fois</A></DIV></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #dedfdf">
    <TD class=messCase1 vAlign=top width=180><A name=t1598676></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1598676"><IMG 
      title=n°1598676 alt=n°1598676 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>sephiburp</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 12-08-2007&nbsp;à&nbsp;11:38:23&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-112043.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1598676&amp;ref=3&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1598676>
      <P></P>
      <DIV class=container>
      <TABLE class=citation>
        <TBODY>
        <TR class=none>
          <TD><B class=s1><A class=Topic 
            href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1598667">pmarion 
            a écrit :</A></B><BR><BR>
            <P>Je ne suis pas sûr que l'on puisse avoir le même programme pour 
            envoyer/recevoir, et donc utiliser un 
      fork.<BR></P></TD></TR></TBODY></TABLE></DIV>
      <P><BR>Pourtant, je tire cet exemple de la doc du CPAN (<A class=cLink 
      href="http://perl.enstimac.fr/DocFr/perlipc.html#client%20interactif%20avec%20io::socket" 
      target=_blank rel=nofollow>Lien</A>) <BR>&nbsp;<BR>Faire 2 programmes est 
      une solution mais du coup, le serveur voit çà comme 2 clients distincts. 
      çà complique tout <IMG title=:( alt=:( 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/frown.gif"> 
      <BR>&nbsp;<BR>Selon le CPAN, c'est possible avec le même programme et un 
      fork (donc 2 processus) : <BR></P>
      <DIV class=container>
      <TABLE class=quote>
        <TBODY>
        <TR class=none>
          <TD><B class=s1>Citation :</B><BR><BR>
            <P>Une fois que vous avez obtenu la connexion au service avec lequel 
            vous désirez discuter, appelez fork pour cloner votre processus. 
            Chacun de ces deux processus identiques a un travail très simple à 
            réaliser : le parent copie tout ce qui provient de la socket sur la 
            sortie standard, pendant que le fils copie simultanément sur la 
            socket tout ce qui vient de l'entrée 
      standard.<BR></P></TD></TR></TBODY></TABLE></DIV>
      <P><BR>Est-ce que quelqun pourrait essayer ces 2 scripts du CPAN et me 
      dire si çà fonctionne ? <BR><A class=cLink 
      href="http://perl.enstimac.fr/DocFr/perlipc.html#serveurs%20tcp%20avec%20io::socket" 
      target=_blank rel=nofollow>Serveur</A> <BR><A class=cLink 
      href="http://perl.enstimac.fr/DocFr/perlipc.html#client%20interactif%20avec%20io::socket" 
      target=_blank rel=nofollow>Client</A></P></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #f7f7f7">
    <TD class=messCase1 vAlign=top width=180><A name=t1598694></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1598694"><IMG 
      title=n°1598694 alt=n°1598694 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>pmarion</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 12-08-2007&nbsp;à&nbsp;14:29:47&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-562552.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1598694&amp;ref=4&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1598694>
      <P>Non, je ne crois pas que le serveur voie deux clients. <BR>&nbsp;<BR>Il 
      faut lancer d'abord le programme de réception qui sera donc le serveur et 
      le programme d'envoi qui sera le client qui se connecte au serveur. 
      <BR></P></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #dedfdf">
    <TD class=messCase1 vAlign=top width=180><A name=t1598698></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1598698"><IMG 
      title=n°1598698 alt=n°1598698 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>pmarion</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 12-08-2007&nbsp;à&nbsp;14:49:19&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-562552.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1598698&amp;ref=5&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1598698>
      <P>En ce qui concerne les exemples de CPAN je les ai testés sous LINUX et 
      ils fonctionnent. &nbsp; <BR>&nbsp;<BR>Pour Win32 il existe peut-être un 
      problème de fork avec des vieilles versions de perl, quelle version de 
      perl, as-tu ?</P>
      <DIV class=edited><A class=cLink 
      href="http://forum.hardware.fr/forum2.php?config=hfr.inc&amp;cat=10&amp;subcat=392&amp;post=107231&amp;page=1&amp;p=1&amp;sondage=&amp;owntopic=&amp;trash=&amp;trash_post=&amp;print=&amp;numreponse=1598698&amp;quote_only=1&amp;new=0&amp;nojs=0" 
      rel=nofollow>Message cité 2 fois</A></DIV></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #f7f7f7">
    <TD class=messCase1 vAlign=top width=180><A name=t1598711></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1598711"><IMG 
      title=n°1598711 alt=n°1598711 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>pmarion</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 12-08-2007&nbsp;à&nbsp;15:23:39&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-562552.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1598711&amp;ref=6&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1598711>
      <P>Voici un exemple complet sans fork du côté client. 
      <BR>&nbsp;<BR>Peux-tu essayer ces deux programmes chez moi sous Win32 ou 
      Linux ils fonctionnent &nbsp;: &nbsp;<BR>&nbsp;<BR>Version serveur : 
      <BR>&nbsp; <BR>#!/usr/bin/perl &nbsp;<BR>use strict; <BR>use warnings; 
      <BR>$|=1 ; <BR>&nbsp;<BR>use IO::Socket; <BR>use Net::hostent; &nbsp; 
      &nbsp; &nbsp; &nbsp;<BR>&nbsp;<BR>use warnings; <BR>use strict; <BR>my 
      $sock = IO::Socket::INET-&gt;new(Proto &nbsp; &nbsp; =&gt; "tcp", 
      <BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LocalAddr &nbsp;=&gt; "127.0.0.1", 
      <BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LocalPort &nbsp;=&gt; 9000, <BR>&nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp;Reuse=&gt;1, &nbsp;<BR>&nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp;Listen=&gt;5) <BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|| die "Failed : $!"; <BR>my 
      $client ; &nbsp;<BR>my $hostinfo ; &nbsp;<BR>while ( $client = 
      $sock-&gt;accept() ) { <BR>&nbsp; $client-&gt;autoflush(1) ; <BR>&nbsp; 
      $hostinfo = gethostbyaddr($client-&gt;peeraddr); <BR>&nbsp; print 
      "Connection" . $hostinfo-&gt;name() . "\n" ; <BR>&nbsp; while ( 
      &lt;$client&gt; ) { <BR>&nbsp; &nbsp; my $lig = $_ ; <BR>&nbsp; &nbsp; 
      print $lig if ( $lig ) ; <BR>&nbsp; &nbsp; if ( $lig eq "who\n" ) { 
      <BR>&nbsp; &nbsp; &nbsp; print $client "who who who who who who\n" ; 
      <BR>&nbsp; &nbsp; } <BR>&nbsp; &nbsp; elsif ( $lig eq "motd\n" ) { 
      <BR>&nbsp; &nbsp; &nbsp; print $client "motd motd motd\n" ; <BR>&nbsp; 
      &nbsp; } <BR>&nbsp; &nbsp; elsif ( $lig eq "quit\n" ) { <BR>&nbsp; &nbsp; 
      &nbsp; print "Déconnexion\n" ; <BR>&nbsp; &nbsp; &nbsp; last ; <BR>&nbsp; 
      &nbsp; } <BR>&nbsp; &nbsp; elsif ( $lig eq "motd\n" ) { <BR>&nbsp; &nbsp; 
      &nbsp; print $client "motd motd motd\n" ; <BR>&nbsp; &nbsp; } <BR>&nbsp; 
      &nbsp; else { <BR>&nbsp; &nbsp; &nbsp; print $client "Commande : who motd 
      quit\n" ; <BR>&nbsp; &nbsp; } <BR>&nbsp; &nbsp; select(undef, undef, 
      undef, 0.25) ; <BR>&nbsp; } <BR>} <BR>close $sock; 
      <BR>&nbsp;<BR>-------------------------------------------------------------------------------------------------------------------- 
      <BR>&nbsp;<BR>Version client <BR>#!/usr/bin/perl &nbsp;<BR>use IO::Socket; 
      <BR>use warnings; <BR>use strict; <BR>&nbsp; <BR>my $sock = 
      IO::Socket::INET-&gt;new(Proto &nbsp; &nbsp; =&gt; "tcp", <BR>&nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp;PeerAddr &nbsp;=&gt; "127.0.0.1", <BR>&nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp;PeerPort &nbsp;=&gt; 9000 ) &nbsp;<BR># &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp;PeerPort &nbsp;=&gt; 9000, Listen=&gt;1, Reuse=&gt;1 
      &nbsp;) &nbsp;<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
      &nbsp; &nbsp; &nbsp; &nbsp;|| die "Failed : $!"; 
      <BR>&nbsp;<BR>$sock-&gt;autoflush(1); <BR>while ( 1 ) { &nbsp;<BR>&nbsp; 
      my $lig = &lt;STDIN&gt; ; <BR>&nbsp; print $sock $lig ; <BR>&nbsp; last if 
      ( $lig eq "quit\n" ) ; &nbsp;<BR>&nbsp; my $reponse = &lt;$sock&gt; ; 
      <BR>&nbsp; print $reponse ; <BR>} <BR>close $sock; 
  <BR></P></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #dedfdf">
    <TD class=messCase1 vAlign=top width=180><A name=t1599124></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1599124"><IMG 
      title=n°1599124 alt=n°1599124 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>sephiburp</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 13-08-2007&nbsp;à&nbsp;18:18:21&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-112043.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1599124&amp;ref=7&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1599124>
      <P>D'abord, merci pour ton aide <IMG title=:) alt=:) 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/smile.gif"> 
      <BR>&nbsp;<BR></P>
      <DIV class=container>
      <TABLE class=citation>
        <TBODY>
        <TR class=none>
          <TD><B class=s1><A class=Topic 
            href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1598698">pmarion 
            a écrit :</A></B><BR><BR>
            <P>Pour Win32 il existe peut-être un problème de fork avec des 
            vieilles versions de perl, quelle version de perl, as-tu 
        ?<BR></P></TD></TR></TBODY></TABLE></DIV>
      <P>J'ai la dernière version en date : 5.8.8 Build 822 <BR>&nbsp;<BR>Tes 2 
      programmes fonctionnent bien chez moi sous Win32. <BR>Wow! Je suis bluffé. 
      Comment ce while(1) arrive à tourner ?? Que représente ce '1' ? 
      <BR>&nbsp;<BR></P></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #f7f7f7">
    <TD class=messCase1 vAlign=top width=180><A name=t1599281></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1599281"><IMG 
      title=n°1599281 alt=n°1599281 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>pmarion</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 14-08-2007&nbsp;à&nbsp;09:35:50&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-562552.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1599281&amp;ref=8&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1599281>
      <P>Le while (1) est l'equivalent d'une boucle sans fin (while true en 
      shell) dont on sort heureusement avec last . <BR>Comme d'habitude en perl, 
      il existe plusieurs façons de générer un bloc . <BR>&nbsp;<BR>En fait 
      l'utilisation de fork complique la programmation pour un client simple. 
      <BR>En effet si le client envoie une requête et attend une réponse, il n'y 
      a pas de raison de se compliquer la vie. <BR>&nbsp;<BR>Par contre si 
      l'application est plus &nbsp;complexe il es nécessaire de passer au fork 
      puisque chaque processus aura son autonomie. &nbsp;<BR>&nbsp;<BR>D'après 
      mes tests le fork fonctionne bien en 5.8.8 sous Win32 et pour savoir ou 
      cela bloque, il faudrait ajouter des print &nbsp;"Etape xxx" à chaque 
      étape du serveur, client père et fils pour voir ce qui se passe. 
      &nbsp;<BR>&nbsp;<BR>Je ne sais pas sit tu veux continuer avec fork, mais 
      je suis à ta disposition pour t'aider <BR>&nbsp;<BR></P>
      <DIV class=edited><A class=cLink 
      href="http://forum.hardware.fr/forum2.php?config=hfr.inc&amp;cat=10&amp;subcat=392&amp;post=107231&amp;page=1&amp;p=1&amp;sondage=&amp;owntopic=&amp;trash=&amp;trash_post=&amp;print=&amp;numreponse=1599281&amp;quote_only=1&amp;new=0&amp;nojs=0" 
      rel=nofollow>Message cité 1 fois</A></DIV></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #dedfdf">
    <TD class=messCase1 vAlign=top width=180><A name=t1599338></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1599338"><IMG 
      title=n°1599338 alt=n°1599338 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>sephiburp</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 14-08-2007&nbsp;à&nbsp;11:47:57&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-112043.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1599338&amp;ref=9&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1599338>
      <P>Effectivement, un client simple (comme ton exemple), recevra une 
      réponse seulement après avoir envoyer une requête. Cà, je l'ai compris 
      seulement ce matin <IMG title=:p alt=:p 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/tongue.gif"> 
      <BR>&nbsp;<BR>En effet, j'ai besoin que les 2 processus (lecture et 
      écriture) aient leur autonomie. <BR>&nbsp;<BR>Voici mon client avec des 
      print à toutes les étapes : <BR>(Pour le serveur, j'ai repris ton code) 
      <BR>&nbsp;<BR></P>
      <TABLE class=code>
        <TBODY>
        <TR class=none>
          <TD><B class=s1 
            style="FONT-FAMILY: Verdana, Helvetica, Arial, Sans-serif">Code 
            :</B><BR>
            <OL class=olcode id=code2>
              <LI>use strict;
              <LI>&nbsp; &nbsp; use warnings;
              <LI>&nbsp; &nbsp; use IO::Socket;
              <LI>
              <LI>&nbsp; &nbsp; my ($kidpid, $sock, $ligne);
              <LI>
              <LI>&nbsp; &nbsp; $sock = IO::Socket::INET-&gt;<SPAN 
              style="COLOR: blue">new</SPAN>(Proto&nbsp; &nbsp; &nbsp;=&gt; 
              "tcp",
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              PeerAddr&nbsp; =&gt; "localhost",
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              PeerPort&nbsp; =&gt; 9000)
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; || die "Failed : $!";
              <LI>&nbsp; &nbsp; $sock-&gt;autoflush(1);
              <LI>
              <LI>&nbsp; &nbsp; print "DEBUT\n";
              <LI>&nbsp; &nbsp; die "Can't fork: $!\n" unless <SPAN 
              style="COLOR: blue">defined</SPAN>($kidpid = fork());
              <LI>
              <LI>&nbsp; &nbsp; # Père : Lecture de la socket
              <LI>&nbsp; &nbsp; <SPAN style="COLOR: blue">if</SPAN> ($kidpid) {
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; print "1\n";
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; <SPAN 
              style="COLOR: blue">while</SPAN> ($ligne = &lt;$sock&gt; ) {
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print "2\n";
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print $ligne;
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print "3\n";
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; }
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; print "4\n";
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; kill("TERM", $kidpid); # envoie 
              SIGTERM au fils
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; print "5\n";
              <LI>&nbsp; &nbsp; }
              <LI>&nbsp; &nbsp; # Fils : Ecriture vers la socket
              <LI>&nbsp; &nbsp; <SPAN style="COLOR: blue">else</SPAN> {
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; print "A\n";
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; <SPAN 
              style="COLOR: blue">while</SPAN> ($ligne = &lt;STDIN&gt; ) {
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; print "B\n";
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; print $sock $ligne ;
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; print "C\n";
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; }
              <LI>&nbsp; &nbsp; }
              <LI>&nbsp; &nbsp; print "FIN\n";</LI></OL></TD></TR></TBODY></TABLE>
      <P><BR>Je lance serveur et client : <BR>&nbsp;<BR><EM>DEBUT <BR>1 <BR>A 
      <BR>2 <BR>HELLO <BR>3</EM> <BR>&nbsp;<BR>Les étapes 1,2,3 montrent que le 
      père a bouclé une fois car le serveur a envoyé "HELLO". Là, le père écoute 
      toujours la socket (ligne 19). <BR>L'étape A montre que le fils reste en 
      écoute sur le &lt;STDIN&gt; (ligne 31). <BR>&nbsp;<BR>Ensuite, je tape 
      "who" : <BR>&nbsp;<BR><EM>who <BR>B</EM> <BR>&nbsp;<BR>Et là, on a juste 
      l'étape B qui montre que le fils a capté le "who" mais il reste bloqué sur 
      l'écriture de la socket (ligne 33). <BR>Et je n'ai plus la main. 
      <BR>&nbsp;<BR>&nbsp;<BR>Si le fils reste bloqué sur l'écriture de la 
      socket, c'est parce que le père est en train de l'écouter ? 
      <BR>&nbsp;<BR></P></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #f7f7f7">
    <TD class=messCase1 vAlign=top width=180><A name=t1599343></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1599343"><IMG 
      title=n°1599343 alt=n°1599343 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>antac</B></DIV>Don't you frag tonight....</TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 14-08-2007&nbsp;à&nbsp;11:52:56&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-2424.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1599343&amp;ref=10&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1599343>
      <P>J'avais fait un truc un peu comme ca en C (jeu d'échec) et 
      effectivement j'ai utilisé les forks</P></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #dedfdf">
    <TD class=messCase1 vAlign=top width=180><A name=t1599357></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1599357"><IMG 
      title=n°1599357 alt=n°1599357 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>pmarion</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 14-08-2007&nbsp;à&nbsp;12:06:43&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-562552.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1599357&amp;ref=11&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1599357>
      <P>Normalement l'envoi est indépendant de la réception car les sockets 
      utilisent dans tampons et donc <BR>en envoi de données n'est pas perdu 
      même si le serveur n'est pas en état de répondre. <BR>&nbsp;<BR>Si l'in 
      connecte deux clients séparés sur un serveur simple que ne gère qu'une 
      connexion à la fois, le deuxième client semble bloqué mais dès que le 
      premier se déconnecte le deuxième reçoit les données et les traite. 
      <BR>&nbsp;<BR>Mais je ne sais même pas si c'est ton cas . <BR>Je ne pense 
      donc pas &nbsp;</P></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #f7f7f7">
    <TD class=messCase1 vAlign=top width=180><A name=t1599385></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1599385"><IMG 
      title=n°1599385 alt=n°1599385 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>sephiburp</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 14-08-2007&nbsp;à&nbsp;13:52:48&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-112043.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1599385&amp;ref=12&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1599385>
      <P>Je suis d'accord pour le serveur simple qui ne sait gérer qu'un client 
      à la fois. D'ailleurs c'est ce que j'utilise dans le test ci-dessus. 
      <BR>Pour le moment, je fais une seule connexion à la fois (un seul client) 
      donc çà ne pose pas de problème. <BR>&nbsp;<BR>&nbsp;<BR></P>
      <DIV class=container>
      <TABLE class=citation>
        <TBODY>
        <TR class=none>
          <TD><B class=s1><A class=Topic 
            href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1599281">pmarion 
            a écrit :</A></B><BR><BR>
            <P>D'après mes tests le fork fonctionne bien en 5.8.8 sous 
            Win32<BR></P></TD></TR></TBODY></TABLE></DIV>
      <P>Chez moi aussi, le fork a l'air de réussir. <BR>J'obtiens bien 2 
      processus différent qui arrivent à bosser (les print fonctionnent par 
      exemple). <BR>&nbsp;<BR></P>
      <DIV class=container>
      <TABLE class=citation>
        <TBODY>
        <TR class=none>
          <TD><B class=s1><A class=Topic 
            href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1598698">pmarion 
            a écrit :</A></B><BR><BR>
            <P>En ce qui concerne les exemples de CPAN je les ai testés sous 
            LINUX et ils fonctionnent.<BR></P></TD></TR></TBODY></TABLE></DIV>
      <P>Et si tu les teste sur Win32, n'es-tu pas non plus bloqué, côté client, 
      après la première saisie au clavier ? <BR>&nbsp;<BR>Peux-être faut-il 
      paramétrer autrement la création de la socket sur Win32 
      (IO::Socket::INET-&gt;new) ?</P></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #dedfdf">
    <TD class=messCase1 vAlign=top width=180><A name=t1599462></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1599462"><IMG 
      title=n°1599462 alt=n°1599462 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>pmarion</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 14-08-2007&nbsp;à&nbsp;15:28:30&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-562552.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1599462&amp;ref=13&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1599462>
      <P>Quel serveur utilises-tu ? <BR>&nbsp;Est-ce lui qui gère le HELLO qui 
      est sur ta trace ? &nbsp;<BR>Peux-tu envoyer les instructions de ton 
      serveur ? <BR>&nbsp;<BR></P></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #f7f7f7">
    <TD class=messCase1 vAlign=top width=180><A name=t1599546></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1599546"><IMG 
      title=n°1599546 alt=n°1599546 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon1.gif"></A></DIV>
      <DIV><B class=s2>sephiburp</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 14-08-2007&nbsp;à&nbsp;18:08:44&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-112043.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1599546&amp;ref=14&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1599546>
      <P>C'est bien le serveur qui gère le HELLO affiché sur la trace. <BR>Voici 
      le code du serveur que j'ai utilisé pour le test : <BR></P>
      <TABLE class=code>
        <TBODY>
        <TR class=none>
          <TD><B class=s1 
            style="FONT-FAMILY: Verdana, Helvetica, Arial, Sans-serif">Code 
            :</B><BR>
            <OL class=olcode id=code3>
              <LI>use strict;
              <LI>use warnings;
              <LI>$|=1 ;
              <LI>
              <LI>use IO::Socket;
              <LI>use Net::hostent;
              <LI>
              <LI>my $sock = IO::Socket::INET-&gt;<SPAN 
              style="COLOR: blue">new</SPAN>(Proto&nbsp; &nbsp; &nbsp; =&gt; 
              "tcp",
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp;LocalAddr&nbsp; =&gt; "127.0.0.1",
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp;LocalPort&nbsp; =&gt; 9000,
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Reuse&nbsp; 
              &nbsp; &nbsp; =&gt; 1,
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp;Listen&nbsp; &nbsp; &nbsp;=&gt; 5)
              <LI>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
              &nbsp; &nbsp; &nbsp;|| die "Failed : $!";
              <LI>my $client ;
              <LI>my $hostinfo ;&nbsp;
              <LI>
              <LI><SPAN style="COLOR: blue">while</SPAN> ( $client = 
              $sock-&gt;accept() ) {
              <LI>&nbsp; $client-&gt;autoflush(1) ;
              <LI>&nbsp; $hostinfo = gethostbyaddr($client-&gt;peeraddr);
              <LI>&nbsp; print "Connexion de " . $hostinfo-&gt;name() . "\n" ;
              <LI>
              <LI>&nbsp; print $client "HELLO\n";
              <LI>
              <LI>&nbsp; <SPAN style="COLOR: blue">while</SPAN> ( 
              &lt;$client&gt; ) {
              <LI>
              <LI>&nbsp; &nbsp; my $lig = $_ ;
              <LI>&nbsp; &nbsp; print $lig <SPAN style="COLOR: blue">if</SPAN> ( 
              $lig ) ;
              <LI>&nbsp; &nbsp; <SPAN style="COLOR: blue">if</SPAN> ( $lig eq 
              "who\n" ) {
              <LI>&nbsp; &nbsp; &nbsp; print $client "who who who who who who\n" 
              ;
              <LI>&nbsp; &nbsp; }
              <LI>&nbsp; &nbsp; elsif ( $lig eq "motd\n" ) {
              <LI>&nbsp; &nbsp; &nbsp; print $client "motd motd motd\n" ;
              <LI>&nbsp; &nbsp; }
              <LI>&nbsp; &nbsp; elsif ( $lig eq "quit\n" ) {
              <LI>&nbsp; &nbsp; &nbsp; print "Déconnexion\n" ;
              <LI>&nbsp; &nbsp; &nbsp; last ;
              <LI>&nbsp; &nbsp; }
              <LI>&nbsp; &nbsp; elsif ( $lig eq "motd\n" ) {
              <LI>&nbsp; &nbsp; &nbsp; print $client "motd motd motd\n" ;
              <LI>&nbsp; &nbsp; }
              <LI>&nbsp; &nbsp; <SPAN style="COLOR: blue">else</SPAN> {
              <LI>&nbsp; &nbsp; &nbsp; print $client "Commande : who motd 
              quit\n" ;
              <LI>&nbsp; &nbsp; }
              <LI>&nbsp; &nbsp; select(undef, undef, undef, 0.25) ;
              <LI>&nbsp; }
              <LI>}
              <LI>close $sock;</LI></OL></TD></TR></TBODY></TABLE>
      <P><BR>&nbsp;<BR>Le serveur peut répondre au client sans problème. 
      &nbsp;<BR>Et le client peut afficher la réponse du serveur tant qu'il ne 
      bloque pas après la première saisie au 
clavier.</P></DIV></TD></TR></TBODY></TABLE>
<TABLE class=messagetable cellSpacing=0 cellPadding=4 width="100%">
  <TBODY>
  <TR class=message style="BACKGROUND-COLOR: #dedfdf">
    <TD class=messCase1 vAlign=top width=180><A name=t1600754></A><A 
      name=bas></A>
      <DIV class=right><A 
      href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm#t1600754"><IMG 
      title=n°1600754 alt=n°1600754 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/icon9.gif"></A></DIV>
      <DIV><B class=s2>sephiburp</B></DIV></TD>
    <TD class=messCase2 vAlign=top>
      <DIV class=toolbar>
      <DIV class=left>Posté le 19-08-2007&nbsp;à&nbsp;11:41:45&nbsp;&nbsp;<A 
      href="http://forum.hardware.fr/hfr/profil-112043.htm" target=_blank><IMG 
      title="Voir son profil" alt=profil 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/profile.gif"></A><A 
      href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;numrep=1600754&amp;ref=15&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0#formulaire" 
      rel=nofollow><IMG title="Répondre à ce message" alt=answer 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/quote.gif"></A></DIV>
      <DIV class=spacer></DIV></DIV>
      <DIV id=para1600754>
      <P><IMG title=:cry: alt=:cry: 
      src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/cry.gif"> 
      &nbsp;<BR>&nbsp;<BR>Je n'ai toujours pas trouvé de solution pour avoir un 
      tel client. <BR>&nbsp;<BR>Personne n'a déjà fais çà pour Windows ? 
      <BR>&nbsp;<BR>Anybody help ? </P></DIV></TD></TR></TBODY></TABLE><BR>
<SCRIPT language=javascript type=text/javascript>var listenumreponse=new Array("1598554","1598667","1598676","1598694","1598698","1598711","1599124","1599281","1599338","1599343","1599357","1599385","1599462","1599546","1600754")</SCRIPT>

<FORM id=goto action=/forum1.php method=get>
<DIV class=nombres><B>Aller à : </B><INPUT type=hidden value=hfr.inc 
name=config> <SELECT onchange="document.getElementById('goto').submit()" 
name=cat><OPTION value=1>Hardware</OPTION><OPTION value=16>Hardware - 
  Périphériques</OPTION><OPTION value=15>Ordinateurs portables</OPTION><OPTION 
  value=23>Technologies Mobiles</OPTION><OPTION value=2>Overclocking, Cooling 
  &amp; Tuning</OPTION><OPTION value=3>Video &amp; Son</OPTION><OPTION 
  value=14>Photo numérique</OPTION><OPTION value=5>Jeux Video</OPTION><OPTION 
  value=4>Windows &amp; Software</OPTION><OPTION value=22>Réseaux grand public / 
  SoHo</OPTION><OPTION value=21>Systèmes &amp; Réseaux Pro</OPTION><OPTION 
  value=11>OS Alternatifs</OPTION><OPTION value=10 
  selected>Programmation</OPTION><OPTION value=12>Graphisme</OPTION><OPTION 
  value=6>Achats &amp; Ventes</OPTION><OPTION value=8>Emploi &amp; 
  Etudes</OPTION><OPTION value=9>Seti et projets distribués</OPTION><OPTION 
  value=13>Discussions</OPTION><OPTION value=prive>Messages 
privés</OPTION></SELECT> <INPUT type=submit value=Go> </DIV></FORM>
<DIV class=left><A accessKey=r 
href="http://forum.hardware.fr/message.php?config=hfr.inc&amp;cat=10&amp;post=107231&amp;page=1&amp;p=1&amp;subcat=392&amp;sondage=0&amp;owntopic=0&amp;new=0" 
rel=nofollow><IMG title="Ajouter une réponse" alt="Ajouter une réponse" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/repondre.gif"></A></DIV>
<DIV class=arbo style="MARGIN: 0px 0px 0px 20px">
<H1><IMG alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/open.png">&nbsp;&nbsp;<A 
class=Ext href="http://forum.hardware.fr/">FORUM HardWare.fr</A></H1><BR>
<H2><IMG alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/tline.png"><IMG 
alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/open.png">&nbsp;&nbsp;<A 
class=Ext 
href="http://forum.hardware.fr/hfr/Programmation/liste_sujet-1.htm">Programmation</A></H2><BR>
<H3><IMG alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/tline3.png"><IMG 
alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/open.png">&nbsp;&nbsp;<A 
class=Ext 
href="http://forum.hardware.fr/hfr/Programmation/Perl/liste_sujet-1.htm">Perl</A></H3><BR>
<H4><IMG alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/tline4.png"><IMG 
alt="" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/open.png">&nbsp;&nbsp;<A 
class=Ext 
href="http://forum.hardware.fr/hfr/Programmation/Perl/perl-ecriture-simultanees-sujet_107231_1.htm">[Perl] 
lecture/écriture simultanées sur une socket</A></H4></DIV>
<DIV class=spacer></DIV><BR>
<DIV class=copyright><A class=copyright title=sitemap 
href="http://forum.hardware.fr/hfr/plan-du-forum.htm">Plan du forum</A> <BR><A 
class=copyright href="http://www.mesdiscussions.net/" target=_blank>Forum 
MesDiscussions.Net</A>, Version 2007.3<BR>(c) 2000-2008 Doctissimo Software<BR>
<DIV class=gene>Page générée en 1.631 secondes</DIV></DIV></DIV></DIV>
<SCRIPT 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/urchin.js" 
type=text/javascript>
</SCRIPT>

<SCRIPT type=text/javascript>
_uacct = "UA-174007-1";
urchinTracker();
</SCRIPT>

<CENTER><BR><A href="http://www.hit-parade.com/hp.asp?site=p576"><IMG height=15 
alt=Hit-Parade 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/logohp1.gif" 
width=77 border=0></A> <A href="http://www.xiti.com/xiti.asp?s=28067" 
target=_top>
<SCRIPT language=JavaScript1.1 type=text/javascript>
<!--
Xt_param = 's=28067&p=forum';
Xt_r = document.referrer;
Xt_h = new Date();
Xt_i = '<img width="39" height="25" border="0" ';
Xt_i += 'src="http://logv5.xiti.com/hit.xiti?'+Xt_param;
Xt_i += '&hl='+Xt_h.getHours()+'x'+Xt_h.getMinutes()+'x'+Xt_h.getSeconds();
if(parseFloat(navigator.appVersion)>=4)
{Xt_s=screen;Xt_i+='&r='+Xt_s.width+'x'+Xt_s.height+'x'+Xt_s.pixelDepth+'x'+Xt_s.colorDepth;}
document.write(Xt_i+'&ref='+Xt_r.replace(/[<>"]/g, '').replace(/&/g, '$')+'" title="Analyse d\'audience">');
//-->
</SCRIPT>
</A><NOSCRIPT><A href="http://www.xiti.com/xiti.asp?s=28067" target=_top>analyse 
mesure frequentation internet par <IMG height=25 alt="Analyse d'audience" 
src="lecture-écriture simultanées sur une socket [Perl] - Perl - Programmation - FORUM HardWare_fr_fichiers/hit.gif" 
width=39 border=0></A> </NOSCRIPT><FONT face="Arial, Helvetica, sans-serif" 
color=#000000 size=1><BR>Copyright © 1997-2007 <A 
href="http://www.hardware.fr/">Hardware.fr SARL</A> / Groupe <A 
href="http://www.ldlc.com/">LDLC</A> / Partenaire de <A 
href="http://www.gamekult.com/">GameKult</A> / <A 
href="http://www.lesnumeriques.com/">LesNumeriques.com</A> / Version anglaise du 
site: <A 
href="http://www.behardware.com/">BeHardware</A></FONT></CENTER></BODY></HTML>
